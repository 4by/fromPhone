<script>


  fetch('pullTextFromHere.html')
  .then(response => response.text())
  .then(fullText => {
    let reg = /(?<=\<script\>)(\n|.)*(?=\<\/script\>)/g
    return fullText.match(reg)
    //return (fullText)
  }
  )
  .then(insideScript => {


     //console.log(insideScript[0])

    const dispRes = (a) => {
        a = a.groups
        a = Object.entries(a)
        a = a.filter((e)=>{return /^result/.test(e[0])})
        a = a.map((e)=>{return e[1]})
        console.log(a)
  
    }
    const listIn = (from, r) => {
      let expl = new RegExp(r)
      let a = from.match(expl)
      return a
    }
    const maxBefore = (bef, grName) => {
      return '(?=(?<'+grName+'>'+bef+'*))\\k<'+grName+'>'
    }
    const insertIn = (num) => {
    let arr = []
    for (let i=0; i<num; i++) {
    arr.splice(0,0, '(?<result'+arr.length+'>', beg('beg'+arr.length),'(?:',maxBefore(bb('bb'+arr.length),'mbb'+arr.length), any,')??')
    arr.splice(arr.length,0,'(?:',maxBefore(be,'be'+arr.length) , any,')??', end, ')')
    }
    return arr
    }
   
    let beg = (grNum) => { return '(?:async|function|const|let|var)' + maxBefore('\\s','fn1'+grNum) + maxBefore('\\w','fn2'+grNum) + maxBefore('\\s','fn3'+grNum) + '\\=?'+maxBefore('\\s','fn4'+grNum)+'\\('+maxBefore('[^()]','fn5'+grNum)+'\\)'+maxBefore('\\s','fn6'+grNum)+'(?:=>)?'+maxBefore('\\s','fn7'+grNum) +'\\{'  }                  
    let end = '\\}'
    let any = '(?:.||\\s)'
    //двойной ? это 0 или 1 - это делает символ необязательным
    let bb = (grNum) => { return '(?:'+any+'(?!'+beg(grNum+'1')+'))' }
    let be = '(?:'+any+'(?!'+end+'))'
    
    
    
    
  
   dispRes(listIn(insideScript[0], insertIn(5).join('')))
   
    
 
    

  })


</script>